import "std/list"
import "std/sort"

test "sort empty" {
    var list: List(i64) = .{}
    sort(i64)(list)
    @assert_eq(list.len(), 0)
}

test "sort single" {
    var list: List(i64) = .{}
    list.append(42)
    sort(i64)(list)
    @assert_eq(list.get(0), 42)
}

test "sort already sorted" {
    var list: List(i64) = .{}
    list.append(1)
    list.append(2)
    list.append(3)
    sort(i64)(list)
    @assert_eq(list.get(0), 1)
    @assert_eq(list.get(1), 2)
    @assert_eq(list.get(2), 3)
}

test "sort reversed" {
    var list: List(i64) = .{}
    list.append(5)
    list.append(4)
    list.append(3)
    list.append(2)
    list.append(1)
    sort(i64)(list)
    @assert_eq(list.get(0), 1)
    @assert_eq(list.get(1), 2)
    @assert_eq(list.get(2), 3)
    @assert_eq(list.get(3), 4)
    @assert_eq(list.get(4), 5)
}

test "sort mixed" {
    var list: List(i64) = .{}
    list.append(3)
    list.append(1)
    list.append(4)
    list.append(1)
    list.append(5)
    list.append(9)
    list.append(2)
    list.append(6)
    sort(i64)(list)
    @assert_eq(list.get(0), 1)
    @assert_eq(list.get(1), 1)
    @assert_eq(list.get(2), 2)
    @assert_eq(list.get(3), 3)
    @assert_eq(list.get(4), 4)
    @assert_eq(list.get(5), 5)
    @assert_eq(list.get(6), 6)
    @assert_eq(list.get(7), 9)
}

test "reverse" {
    var list: List(i64) = .{}
    list.append(1)
    list.append(2)
    list.append(3)
    list.append(4)
    list.append(5)
    reverse(i64)(list)
    @assert_eq(list.get(0), 5)
    @assert_eq(list.get(1), 4)
    @assert_eq(list.get(2), 3)
    @assert_eq(list.get(3), 2)
    @assert_eq(list.get(4), 1)
}

test "sort duplicates" {
    var list: List(i64) = .{}
    list.append(3)
    list.append(3)
    list.append(1)
    list.append(1)
    list.append(2)
    list.append(2)
    sort(i64)(list)
    @assert_eq(list.get(0), 1)
    @assert_eq(list.get(1), 1)
    @assert_eq(list.get(2), 2)
    @assert_eq(list.get(3), 2)
    @assert_eq(list.get(4), 3)
    @assert_eq(list.get(5), 3)
}
