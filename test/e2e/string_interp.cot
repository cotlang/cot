test "simple variable" {
    var name = "world"
    var s = "Hello ${name}"
    @assert_eq(s, "Hello world")
}

test "integer interpolation" {
    var x: i64 = 42
    var s = "x = ${x}"
    @assert_eq(s, "x = 42")
}

test "expression" {
    var a: i64 = 3
    var b: i64 = 4
    var s = "sum = ${a + b}"
    @assert_eq(s, "sum = 7")
}

test "multiple interpolations" {
    var a: i64 = 1
    var b: i64 = 2
    var s = "${a} + ${b}"
    @assert_eq(s, "1 + 2")
}

test "adjacent expressions" {
    var x: i64 = 10
    var y: i64 = 20
    var s = "${x}${y}"
    @assert_eq(s, "1020")
}

test "only expression" {
    var name = "hello"
    var s = "${name}"
    @assert_eq(s, "hello")
}

test "negative integer" {
    var x: i64 = 0 - 5
    var s = "val=${x}"
    @assert_eq(s, "val=-5")
}

test "zero" {
    var x: i64 = 0
    var s = "n=${x}"
    @assert_eq(s, "n=0")
}

test "string concat in interp" {
    var a = "he"
    var b = "llo"
    var s = "say: ${a + b}"
    @assert_eq(s, "say: hello")
}

test "empty text segments" {
    var x: i64 = 99
    var s = "${x}"
    @assert_eq(s, "99")
}
